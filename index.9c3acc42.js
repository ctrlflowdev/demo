var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function e(t){return t&&t.__esModule?t.default:t}function n(){}function o(t,e){for(const n in e)t[n]=e[n];return t}function l(t){return t()}function i(){return Object.create(null)}function s(t){t.forEach(l)}function r(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t){return 0===Object.keys(t).length}function u(t,e,n,l){return t[1]&&l?o(n.ctx.slice(),t[1](l(e))):n.ctx}function d(t,e,n,o){if(t[2]&&o){const l=t[2](o(n));if(void 0===e.dirty)return l;if("object"==typeof l){const t=[],n=Math.max(e.dirty.length,l.length);for(let o=0;o<n;o+=1)t[o]=e.dirty[o]|l[o];return t}return e.dirty|l}return e.dirty}function p(t,e,n,o,l,i){if(l){const s=u(e,n,o,i);t.p(s,l)}}new Set;let f=!1;function g(t,e){t.appendChild(e)}function v(t,e,n){const o=h(t);if(!o.getElementById(e)){const t=b("style");t.id=e,t.textContent=n,m(o,t)}}function h(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function m(t,e){g(t.head||t,e)}function x(t,e,n){t.insertBefore(e,n||null)}function $(t){t.parentNode.removeChild(t)}function k(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function b(t){return document.createElement(t)}function w(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function y(t){return document.createTextNode(t)}function _(){return y(" ")}function C(){return y("")}function S(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function E(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function N(t){return""===t?null:+t}function T(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function z(t,e){t.value=null==e?"":e}function A(t,e,n,o){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function D(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}t.selectedIndex=-1}function L(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function M(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(t,n,o,e),l}new Map;let I;function O(t){I=t}function W(){if(!I)throw new Error("Function called outside component initialization");return I}function R(t){W().$$.on_mount.push(t)}function B(){const t=W();return(e,n,{cancelable:o=!1}={})=>{const l=t.$$.callbacks[e];if(l){const i=M(e,n,{cancelable:o});return l.slice().forEach((e=>{e.call(t,i)})),!i.defaultPrevented}return!0}}function j(t,e){return W().$$.context.set(t,e),e}function q(t){return W().$$.context.get(t)}function F(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const V=[],H=[],P=[],J=[],G=Promise.resolve();let U=!1;function K(){U||(U=!0,G.then(tt))}function Q(t){P.push(t)}function X(t){J.push(t)}const Y=new Set;let Z=0;function tt(){const t=I;do{for(;Z<V.length;){const t=V[Z];Z++,O(t),et(t.$$)}for(O(null),V.length=0,Z=0;H.length;)H.pop()();for(let t=0;t<P.length;t+=1){const e=P[t];Y.has(e)||(Y.add(e),e())}P.length=0}while(V.length);for(;J.length;)J.pop()();U=!1,Y.clear(),O(t)}function et(t){if(null!==t.fragment){t.update(),s(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Q)}}const nt=new Set;let ot;function lt(){ot={r:0,c:[],p:ot}}function it(){ot.r||s(ot.c),ot=ot.p}function st(t,e){t&&t.i&&(nt.delete(t),t.i(e))}function rt(t,e,n,o){if(t&&t.o){if(nt.has(t))return;nt.add(t),ot.c.push((()=>{nt.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}const ct="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:t;new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]);let at;function ut(t,e,n){const o=t.$$.props[e];void 0!==o&&(t.$$.bound[o]=n,n(t.$$.ctx[o]))}function dt(t){t&&t.c()}function pt(t,e,n,o){const{fragment:i,on_mount:c,on_destroy:a,after_update:u}=t.$$;i&&i.m(e,n),o||Q((()=>{const e=c.map(l).filter(r);a?a.push(...e):s(e),t.$$.on_mount=[]})),u.forEach(Q)}function ft(t,e){const n=t.$$;null!==n.fragment&&(s(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function gt(t,e,o,l,r,c,a,u=[-1]){const d=I;O(t);const p=t.$$={fragment:null,ctx:null,props:c,update:n,not_equal:r,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(d?d.$$.context:[])),callbacks:i(),dirty:u,skip_bound:!1,root:e.target||d.$$.root};a&&a(p.root);let g=!1;if(p.ctx=o?o(t,e.props||{},((e,n,...o)=>{const l=o.length?o[0]:n;return p.ctx&&r(p.ctx[e],p.ctx[e]=l)&&(!p.skip_bound&&p.bound[e]&&p.bound[e](l),g&&function(t,e){-1===t.$$.dirty[0]&&(V.push(t),K(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(t,e)),n})):[],p.update(),g=!0,s(p.before_update),p.fragment=!!l&&l(p.ctx),e.target){if(e.hydrate){f=!0;const t=function(t){return Array.from(t.childNodes)}(e.target);p.fragment&&p.fragment.l(t),t.forEach($)}else p.fragment&&p.fragment.c();e.intro&&st(t.$$.fragment),pt(t,e.target,e.anchor,e.customElement),f=!1,tt()}O(d)}"function"==typeof HTMLElement&&(at=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(l).filter(r);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){s(this.$$.on_disconnect)}$destroy(){ft(this,1),this.$destroy=n}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&!a(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});class vt{$destroy(){ft(this,1),this.$destroy=n}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&!a(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ht(t){v(t,"svelte-r8xme6","@import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300&family=Roboto:wght@100;300;400;500&display=swap');.nav-bar.svelte-r8xme6{width:100%;height:60px;background-color:rgb(36, 36, 36);box-shadow:0 -10px 15px;display:flex;align-items:center;color:white}.nav-banner.svelte-r8xme6{display:inline-block;margin-left:45px;margin-right:160px;text-align:center;font-size:24px;cursor:pointer}.brand-segment-lowcode.svelte-r8xme6{font-weight:300;font-family:'Roboto Mono', monospace}.brand-segment-devkit.svelte-r8xme6{font-weight:500;font-family:'Roboto', sans-serif;color:rgb(234, 136, 0);font-size:25px}")}function mt(t){let e,o,l,i;return{c(){e=b("nav"),o=b("div"),o.innerHTML='<span class="brand-segment-lowcode svelte-r8xme6">lowcode</span><span class="brand-segment-devkit svelte-r8xme6">DevKit</span>',E(o,"class","nav-banner svelte-r8xme6"),E(e,"class","nav-bar svelte-r8xme6")},m(n,s){x(n,e,s),g(e,o),l||(i=S(o,"click",t[1]),l=!0)},p:n,i:n,o:n,d(t){t&&$(e),l=!1,i()}}}function xt(t){let e=q("history");return[e,()=>e.pushState("/")]}var $t=class extends vt{constructor(t){super(),gt(this,t,xt,mt,c,{},ht)}};let kt=null;var bt={getMetadata:async()=>kt||=await fetch("http://localhost:3000/lcdk/meta").then((t=>t.json())),getAllWorkflows:async()=>await fetch("http://localhost:3000/lcdk/workflows").then((t=>t.json())),getWorkflow:async t=>await fetch(`http://localhost:3000/lcdk/workflows/${t}`).then((t=>t.json())),createWorkflow:async t=>await fetch("http://localhost:3000/lcdk/workflows",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((t=>t.json())),updateWorkflow:async(t,e)=>await fetch(`http://localhost:3000/lcdk/workflows/${t}`,{method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((t=>t.json())),async deleteWorkflows(t){await fetch(`http://localhost:3000/lcdk/workflows/${t}`,{method:"DELETE"})}};function wt(t){v(t,"svelte-1u8kct",".content-area.svelte-1u8kct.svelte-1u8kct{padding:35px 50px 35px 50px;max-width:1100px;margin-right:auto;margin-left:auto}.section-name.svelte-1u8kct.svelte-1u8kct{font-family:'Roboto', 'sans-serif';font-weight:400;font-size:40px;margin-left:10px}.btn.svelte-1u8kct.svelte-1u8kct{font-size:18px;font-weight:300;margin-left:15px;border:1px solid gainsboro;padding:5px 10px 5px 10px;border-radius:2px;vertical-align:middle;box-shadow:0px 2px 10px -8px;background-color:rgb(250, 250, 250)}.btn.svelte-1u8kct.svelte-1u8kct:hover{cursor:pointer}.section-container.svelte-1u8kct.svelte-1u8kct{width:100%;min-height:300px;border:1px solid gainsboro;border-radius:2px;background-color:rgb(250, 250, 250);box-shadow:0px 3px 20px -12px;padding:0 15px 15px 15px;margin-bottom:30px}.section-table.svelte-1u8kct.svelte-1u8kct{width:100%;border-collapse:collapse}.section-header.svelte-1u8kct.svelte-1u8kct{text-align:left;padding-bottom:10px}.section-row.svelte-1u8kct.svelte-1u8kct{max-height:20px}.section-row.svelte-1u8kct.svelte-1u8kct:hover{cursor:pointer;background-color:rgb(229, 227, 227)}.components-section.svelte-1u8kct.svelte-1u8kct{display:flex}.component-col.svelte-1u8kct.svelte-1u8kct{width:calc(100% / 3);padding:20px;border:1px solid gainsboro;border-radius:2px;background-color:rgb(250, 250, 250);box-shadow:0px 3px 20px -12px}.component-col.svelte-1u8kct.svelte-1u8kct:not(:last-child){margin-right:15px}.component-col-header.svelte-1u8kct.svelte-1u8kct{font-size:20px;font-weight:500}.component-col-row.svelte-1u8kct.svelte-1u8kct{margin-top:10px}.section-row.svelte-1u8kct>.svelte-1u8kct:first-child,.section-header.svelte-1u8kct>.svelte-1u8kct:first-child{padding-left:15px}")}function yt(t,e,n){const o=t.slice();return o[7]=e[n],o}function _t(t,e,n){const o=t.slice();return o[10]=e[n],o}function Ct(t,e,n){const o=t.slice();return o[13]=e[n],o}function St(t,e,n){const o=t.slice();return o[7]=e[n],o}function Et(t){let e,n,o,l,i,s,r,c,a,u,d,p,f=t[7].title+"",v=t[7].type+"",h=t[7].lastModifiedAt+"";function m(){return t[4](t[7])}return{c(){e=b("tr"),n=b("td"),o=y(f),l=_(),i=b("td"),s=y(v),r=_(),c=b("td"),a=y(h),u=_(),E(n,"class","svelte-1u8kct"),E(i,"class","svelte-1u8kct"),E(c,"class","svelte-1u8kct"),E(e,"class","section-row svelte-1u8kct"),E(e,"height","40px")},m(t,f){x(t,e,f),g(e,n),g(n,o),g(e,l),g(e,i),g(i,s),g(e,r),g(e,c),g(c,a),g(e,u),d||(p=S(e,"click",m),d=!0)},p(e,n){t=e,2&n&&f!==(f=t[7].title+"")&&T(o,f),2&n&&v!==(v=t[7].type+"")&&T(s,v),2&n&&h!==(h=t[7].lastModifiedAt+"")&&T(a,h)},d(t){t&&$(e),d=!1,p()}}}function Nt(t){let e,n,o=t[13].title+"";return{c(){e=b("div"),n=y(o),E(e,"class","component-col-row svelte-1u8kct")},m(t,o){x(t,e,o),g(e,n)},p(t,e){1&e&&o!==(o=t[13].title+"")&&T(n,o)},d(t){t&&$(e)}}}function Tt(t){let e,n,o=t[10].title+"";return{c(){e=b("div"),n=y(o),E(e,"class","component-col-row svelte-1u8kct")},m(t,o){x(t,e,o),g(e,n)},p(t,e){1&e&&o!==(o=t[10].title+"")&&T(n,o)},d(t){t&&$(e)}}}function zt(t){let e,n,o=t[7].title+"";return{c(){e=b("div"),n=y(o),E(e,"class","component-col-row svelte-1u8kct")},m(t,o){x(t,e,o),g(e,n)},p(t,e){1&e&&o!==(o=t[7].title+"")&&T(n,o)},d(t){t&&$(e)}}}function At(t){let e,o,l,i,s,r,c,a,u,d,p,f,v,h,m,w,C,N,T,z,A,D,L,M,I,O,W=t[1],R=[];for(let e=0;e<W.length;e+=1)R[e]=Et(St(t,W,e));let B=t[0]?.eventDefs||[],j=[];for(let e=0;e<B.length;e+=1)j[e]=Nt(Ct(t,B,e));let q=t[0]?.actionDefs||[],F=[];for(let e=0;e<q.length;e+=1)F[e]=Tt(_t(t,q,e));let V=t[0]?.workflowDefs||[],H=[];for(let e=0;e<V.length;e+=1)H[e]=zt(yt(t,V,e));return{c(){e=b("div"),o=b("h2"),l=y("Workflows\r\n    "),i=b("span"),i.textContent="New +",s=_(),r=b("div"),c=b("table"),a=b("tr"),a.innerHTML='<th class="svelte-1u8kct">Title</th> \n        <th class="svelte-1u8kct">Type</th> \n        <th class="svelte-1u8kct">Last Modified</th>',u=_();for(let t=0;t<R.length;t+=1)R[t].c();d=_(),p=b("h2"),p.textContent="Components",f=_(),v=b("div"),h=b("div"),m=b("div"),m.textContent="Events",w=_();for(let t=0;t<j.length;t+=1)j[t].c();C=_(),N=b("div"),T=b("div"),T.textContent="Actions",z=_();for(let t=0;t<F.length;t+=1)F[t].c();A=_(),D=b("div"),L=b("div"),L.textContent="Templates",M=_();for(let t=0;t<H.length;t+=1)H[t].c();E(i,"class","btn svelte-1u8kct"),E(o,"class","section-name svelte-1u8kct"),E(a,"height","60px"),E(a,"class","section-header svelte-1u8kct"),E(c,"class","section-table svelte-1u8kct"),E(r,"class","section-container svelte-1u8kct"),E(p,"class","section-name svelte-1u8kct"),E(m,"class","component-col-header svelte-1u8kct"),E(h,"class","component-col svelte-1u8kct"),E(T,"class","component-col-header svelte-1u8kct"),E(N,"class","component-col svelte-1u8kct"),E(L,"class","component-col-header svelte-1u8kct"),E(D,"class","component-col svelte-1u8kct"),E(v,"class","components-section svelte-1u8kct"),E(e,"class","content-area svelte-1u8kct")},m(n,$){x(n,e,$),g(e,o),g(o,l),g(o,i),g(e,s),g(e,r),g(r,c),g(c,a),g(c,u);for(let t=0;t<R.length;t+=1)R[t].m(c,null);g(e,d),g(e,p),g(e,f),g(e,v),g(v,h),g(h,m),g(h,w);for(let t=0;t<j.length;t+=1)j[t].m(h,null);g(v,C),g(v,N),g(N,T),g(N,z);for(let t=0;t<F.length;t+=1)F[t].m(N,null);g(v,A),g(v,D),g(D,L),g(D,M);for(let t=0;t<H.length;t+=1)H[t].m(D,null);I||(O=S(i,"click",t[2]),I=!0)},p(t,[e]){if(10&e){let n;for(W=t[1],n=0;n<W.length;n+=1){const o=St(t,W,n);R[n]?R[n].p(o,e):(R[n]=Et(o),R[n].c(),R[n].m(c,null))}for(;n<R.length;n+=1)R[n].d(1);R.length=W.length}if(1&e){let n;for(B=t[0]?.eventDefs||[],n=0;n<B.length;n+=1){const o=Ct(t,B,n);j[n]?j[n].p(o,e):(j[n]=Nt(o),j[n].c(),j[n].m(h,null))}for(;n<j.length;n+=1)j[n].d(1);j.length=B.length}if(1&e){let n;for(q=t[0]?.actionDefs||[],n=0;n<q.length;n+=1){const o=_t(t,q,n);F[n]?F[n].p(o,e):(F[n]=Tt(o),F[n].c(),F[n].m(N,null))}for(;n<F.length;n+=1)F[n].d(1);F.length=q.length}if(1&e){let n;for(V=t[0]?.workflowDefs||[],n=0;n<V.length;n+=1){const o=yt(t,V,n);H[n]?H[n].p(o,e):(H[n]=zt(o),H[n].c(),H[n].m(D,null))}for(;n<H.length;n+=1)H[n].d(1);H.length=V.length}},i:n,o:n,d(t){t&&$(e),k(R,t),k(j,t),k(F,t),k(H,t),I=!1,O()}}}function Dt(t,e,n){let o,l=[],i=q("history");function s(t){i.pushState(`/workflow/?workflow-id=${t}`)}return t.$$.update=()=>{1&t.$$.dirty&&(o||bt.getMetadata().then((t=>n(0,o=t))))},bt.getAllWorkflows().then((t=>n(1,l=t))),[o,l,function(){i.pushState("/workflow/")},s,t=>s(t.id)]}var Lt=class extends vt{constructor(t){super(),gt(this,t,Dt,At,c,{},wt)}};function Mt(t){let e,o,l,i,s,c;const a=t[2].default,f=function(t,e,n,o){if(t){const l=u(t,e,n,o);return t[0](l)}}(a,t,t[1],null);return{c(){e=b("div"),o=b("div"),f&&f.c(),o.hidden=!0},m(a,u){var d;x(a,e,u),g(e,o),f&&f.m(o,null),i=!0,s||(d=l=It.call(null,e,t[0]),c=d&&r(d.destroy)?d.destroy:n,s=!0)},p(t,[e]){f&&f.p&&(!i||2&e)&&p(f,a,t,t[1],i?d(a,t[1],e,null):function(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}(t[1]),null),l&&r(l.update)&&1&e&&l.update.call(null,t[0])},i(t){i||(st(f,t),i=!0)},o(t){rt(f,t),i=!1},d(t){t&&$(e),f&&f.d(t),s=!1,c()}}}function It(t,e="body"){let n,o=t.children[0];async function l(t){if("string"==typeof(e=t)){if(n=document.querySelector(e),null===n&&(await(K(),G),n=document.querySelector(e)),null===n)throw new Error(`No element found matching css selector: "${e}"`)}else{if(!(e instanceof HTMLElement))throw new TypeError(`Unknown portal target type: ${null===e?"null":typeof e}. Allowed types: string (CSS selector) or HTMLElement.`);n=e}n.appendChild(o),o.hidden=!1}let i=Ot(t);return o.setAttribute("style",`position: absolute; left: ${i.offsetLeft}px; top: ${i.offsetTop}px;`),l(e),{update:l,destroy:function(){o.parentNode&&o.parentNode.removeChild(o)}}}function Ot(t){let{offsetTop:e,offsetLeft:n}=t;if(t.offsetParent){let o=Ot(t.offsetParent);e+=o.offsetTop,n+=o.offsetLeft}return{offsetTop:e,offsetLeft:n}}function Wt(t,e,n){let{$$slots:o={},$$scope:l}=e,{target:i="body"}=e;return t.$$set=t=>{"target"in t&&n(0,i=t.target),"$$scope"in t&&n(1,l=t.$$scope)},[i,l,o]}var Rt=class extends vt{constructor(t){super(),gt(this,t,Wt,Mt,c,{target:0})}};function Bt(t){v(t,"svelte-60kffc",".ref-expression.svelte-60kffc{display:flex;flex-direction:row;border:1.75px solid #ff9120;border-radius:2px;flex-wrap:wrap;padding:5px;background-color:rgb(253 246 234);gap:7px 7px}")}function jt(t,e,n){const o=t.slice();return o[5]=e[n],o}function qt(t){let e,o,l,i=t[5].type+"";return{c(){e=b("option"),o=y(i),e.__value=l=t[5],e.value=e.__value},m(t,n){x(t,e,n),g(e,o)},p:n,d(t){t&&$(e)}}}function Ft(t){let e,o,l,i,r,c,a,u,d,p,f,v,h=t[1],m=[];for(let e=0;e<h.length;e+=1)m[e]=qt(jt(t,h,e));return{c(){e=b("div"),o=b("select"),l=b("option"),i=y("Select Action");for(let t=0;t<m.length;t+=1)m[t].c();r=_(),c=b("div"),c.textContent="Output:",a=_(),u=b("select"),d=b("option"),p=y("Select"),l.__value=void 0,l.value=l.__value,void 0===t[0].settings.actionId&&Q((()=>t[2].call(o))),d.__value=void 0,d.value=d.__value,void 0===t[0].settings.outputName&&Q((()=>t[3].call(u))),E(e,"class","ref-expression svelte-60kffc")},m(n,s){x(n,e,s),g(e,o),g(o,l),g(l,i);for(let t=0;t<m.length;t+=1)m[t].m(o,null);D(o,t[0].settings.actionId),g(e,r),g(e,c),g(e,a),g(e,u),g(u,d),g(d,p),D(u,t[0].settings.outputName),f||(v=[S(o,"change",t[2]),S(u,"change",t[3])],f=!0)},p(t,[e]){if(2&e){let n;for(h=t[1],n=0;n<h.length;n+=1){const l=jt(t,h,n);m[n]?m[n].p(l,e):(m[n]=qt(l),m[n].c(),m[n].m(o,null))}for(;n<m.length;n+=1)m[n].d(1);m.length=h.length}3&e&&D(o,t[0].settings.actionId),3&e&&D(u,t[0].settings.outputName)},i:n,o:n,d(t){t&&$(e),k(m,t),f=!1,s(v)}}}function Vt(t,e){let n=e.pop();if("workflow"===n.kind)return[];if("path"===n.kind){const o=n.steps.indexOf(t);let l=n.steps.slice(0,o).filter((t=>"action"===t.kind));return[...Vt(n,e),...l]}return Vt(n,e)}function Ht(t,e,n){let{def:o}=e,l=[...q("parents")],i=Vt(l.pop(),l).reverse();return t.$$set=t=>{"def"in t&&n(0,o=t.def)},t.$$.update=()=>{1&t.$$.dirty&&(o.settings||n(0,o.settings={actionId:null,outputName:null},o))},[o,i,function(){o.settings.actionId=L(this),n(0,o),n(1,i)},function(){o.settings.outputName=L(this),n(0,o),n(1,i)}]}var Pt=class extends vt{constructor(t){super(),gt(this,t,Ht,Ft,c,{def:0},Bt)}};function Jt(t){v(t,"svelte-1qidylm","input.svelte-1qidylm{background-color:rgb(243 243 251);border:1.75px solid rgb(38, 38, 205);border-radius:2px}")}function Gt(t){let e,o,l;return{c(){e=b("input"),E(e,"type","text"),E(e,"class","svelte-1qidylm")},m(n,i){x(n,e,i),z(e,t[0].inputs.value),o||(l=S(e,"input",t[1]),o=!0)},p(t,[n]){1&n&&e.value!==t[0].inputs.value&&z(e,t[0].inputs.value)},i:n,o:n,d(t){t&&$(e),o=!1,l()}}}function Ut(t,e,n){let{def:o}=e;return t.$$set=t=>{"def"in t&&n(0,o=t.def)},t.$$.update=()=>{1&t.$$.dirty&&(o.inputs||n(0,o.inputs={value:null},o))},[o,function(){o.inputs.value=this.value,n(0,o)}]}var Kt=class extends vt{constructor(t){super(),gt(this,t,Ut,Gt,c,{def:0},Jt)}};function Qt(t){v(t,"svelte-1nlw00k","input.svelte-1nlw00k{background-color:rgb(255 255 236);border:1.75px solid rgb(194, 194, 19);border-radius:2px}")}function Xt(t){let e,o,l;return{c(){e=b("input"),E(e,"type","number"),E(e,"class","svelte-1nlw00k")},m(n,i){x(n,e,i),z(e,t[0].inputs.value),o||(l=S(e,"input",t[1]),o=!0)},p(t,[n]){1&n&&N(e.value)!==t[0].inputs.value&&z(e,t[0].inputs.value)},i:n,o:n,d(t){t&&$(e),o=!1,l()}}}function Yt(t,e,n){let{def:o}=e;return t.$$set=t=>{"def"in t&&n(0,o=t.def)},t.$$.update=()=>{1&t.$$.dirty&&(o.inputs||n(0,o.inputs={value:null},o))},[o,function(){o.inputs.value=N(this.value),n(0,o)}]}var Zt=class extends vt{constructor(t){super(),gt(this,t,Yt,Xt,c,{def:0},Qt)}};function te(t){v(t,"svelte-1bbmcy0",".decision-expression.svelte-1bbmcy0.svelte-1bbmcy0{display:flex;flex-direction:row;border:1.75px solid rgb(129, 70, 255);flex-wrap:wrap;padding:7px;background-color:rgb(243 237 255);gap:7px 7px;border-radius:2px}.decision-expression.svelte-1bbmcy0>div.svelte-1bbmcy0{display:flex;flex-direction:row;flex-wrap:nowrap;gap:7px 7px}")}function ee(t){let e,n,o,l,i,s,r,c,a,u,d,p,f,v,h,m,k,w,y;return s=new Ne({props:{def:t[0].inputs.condition}}),p=new Ne({props:{def:t[0].inputs.trueValue}}),w=new Ne({props:{def:t[0].inputs.falseValue}}),{c(){e=b("div"),n=b("div"),o=b("div"),o.textContent="If",l=_(),i=b("div"),dt(s.$$.fragment),r=_(),c=b("div"),a=b("div"),a.textContent="Then",u=_(),d=b("div"),dt(p.$$.fragment),f=_(),v=b("div"),h=b("div"),h.textContent="Else",m=_(),k=b("div"),dt(w.$$.fragment),E(n,"class","svelte-1bbmcy0"),E(c,"class","svelte-1bbmcy0"),E(v,"class","svelte-1bbmcy0"),E(e,"class","decision-expression svelte-1bbmcy0")},m(t,$){x(t,e,$),g(e,n),g(n,o),g(n,l),g(n,i),pt(s,i,null),g(e,r),g(e,c),g(c,a),g(c,u),g(c,d),pt(p,d,null),g(e,f),g(e,v),g(v,h),g(v,m),g(v,k),pt(w,k,null),y=!0},p(t,[e]){const n={};1&e&&(n.def=t[0].inputs.condition),s.$set(n);const o={};1&e&&(o.def=t[0].inputs.trueValue),p.$set(o);const l={};1&e&&(l.def=t[0].inputs.falseValue),w.$set(l)},i(t){y||(st(s.$$.fragment,t),st(p.$$.fragment,t),st(w.$$.fragment,t),y=!0)},o(t){rt(s.$$.fragment,t),rt(p.$$.fragment,t),rt(w.$$.fragment,t),y=!1},d(t){t&&$(e),ft(s),ft(p),ft(w)}}}function ne(t,e,n){let{def:o}=e;return t.$$set=t=>{"def"in t&&n(0,o=t.def)},t.$$.update=()=>{1&t.$$.dirty&&(o.inputs||n(0,o.inputs={condition:{kind:"expression"},trueValue:{kind:"expression"},falseValue:{kind:"expression"}},o))},[o]}var oe=class extends vt{constructor(t){super(),gt(this,t,ne,ee,c,{def:0},te)}};function le(t){v(t,"svelte-tbrw02",".condition-expression.svelte-tbrw02{display:flex;flex-direction:row;border:1.75px solid rgb(129, 70, 255);flex-wrap:wrap;padding:7px;background-color:rgb(243 237 255);gap:7px 7px;border-radius:2px}")}function ie(t){let e,n,o,l,i,s,r,c,a,u,d,p,f,v;return o=new Ne({props:{def:t[0].inputs.firstValue}}),d=new Ne({props:{def:t[0].inputs.secondValue}}),{c(){e=b("div"),n=b("div"),dt(o.$$.fragment),l=_(),i=b("select"),s=b("option"),s.textContent="Equals",r=b("option"),r.textContent="Is Less Than",c=b("option"),c.textContent="Is Greater Than",a=_(),u=b("div"),dt(d.$$.fragment),s.__value="==",s.value=s.__value,r.__value="<",r.value=r.__value,c.__value=">",c.value=c.__value,void 0===t[0].settings.conditionType&&Q((()=>t[1].call(i))),E(e,"class","condition-expression svelte-tbrw02")},m(h,m){x(h,e,m),g(e,n),pt(o,n,null),g(e,l),g(e,i),g(i,s),g(i,r),g(i,c),D(i,t[0].settings.conditionType),g(e,a),g(e,u),pt(d,u,null),p=!0,f||(v=S(i,"change",t[1]),f=!0)},p(t,[e]){const n={};1&e&&(n.def=t[0].inputs.firstValue),o.$set(n),1&e&&D(i,t[0].settings.conditionType);const l={};1&e&&(l.def=t[0].inputs.secondValue),d.$set(l)},i(t){p||(st(o.$$.fragment,t),st(d.$$.fragment,t),p=!0)},o(t){rt(o.$$.fragment,t),rt(d.$$.fragment,t),p=!1},d(t){t&&$(e),ft(o),ft(d),f=!1,v()}}}function se(t,e,n){let{def:o}=e;return t.$$set=t=>{"def"in t&&n(0,o=t.def)},t.$$.update=()=>{1&t.$$.dirty&&(o.inputs||n(0,o.inputs={firstValue:{kind:"expression"},secondValue:{kind:"expression"}},o),o.settings||n(0,o.settings={conditionType:"=="},o))},[o,function(){o.settings.conditionType=L(this),n(0,o)}]}var re=class extends vt{constructor(t){super(),gt(this,t,se,ie,c,{def:0},le)}};function ce(t){v(t,"svelte-1vig6ia",".and-or-expression.svelte-1vig6ia{display:flex;flex-direction:row;border:1.75px solid rgb(129, 70, 255);flex-wrap:wrap;padding:7px;background-color:rgb(243 237 255);gap:7px 7px;border-radius:2px}")}function ae(t){let e,n,o,l,i,s,r,c,a,u,d,p,f;return o=new Ne({props:{def:t[0].inputs.firstCondition}}),u=new Ne({props:{def:t[0].inputs.secondCondition}}),{c(){e=b("div"),n=b("div"),dt(o.$$.fragment),l=_(),i=b("select"),s=b("option"),s.textContent="AND",r=b("option"),r.textContent="OR",c=_(),a=b("div"),dt(u.$$.fragment),s.__value="and",s.value=s.__value,r.__value="or",r.value=r.__value,void 0===t[0].settings.conditionGroupType&&Q((()=>t[1].call(i))),E(e,"class","and-or-expression svelte-1vig6ia")},m(v,h){x(v,e,h),g(e,n),pt(o,n,null),g(e,l),g(e,i),g(i,s),g(i,r),D(i,t[0].settings.conditionGroupType),g(e,c),g(e,a),pt(u,a,null),d=!0,p||(f=S(i,"change",t[1]),p=!0)},p(t,[e]){const n={};1&e&&(n.def=t[0].inputs.firstCondition),o.$set(n),1&e&&D(i,t[0].settings.conditionGroupType);const l={};1&e&&(l.def=t[0].inputs.secondCondition),u.$set(l)},i(t){d||(st(o.$$.fragment,t),st(u.$$.fragment,t),d=!0)},o(t){rt(o.$$.fragment,t),rt(u.$$.fragment,t),d=!1},d(t){t&&$(e),ft(o),ft(u),p=!1,f()}}}function ue(t,e,n){let{def:o}=e;return t.$$set=t=>{"def"in t&&n(0,o=t.def)},t.$$.update=()=>{1&t.$$.dirty&&(o.inputs||n(0,o.inputs={firstCondition:{kind:"expression"},secondCondition:{kind:"expression"}},o),o.settings||n(0,o.settings={conditionGroupType:"and"},o))},[o,function(){o.settings.conditionGroupType=L(this),n(0,o)}]}var de={categories:[{title:"Core",expressions:[{component:Kt,title:"Text",type:"text"},{component:Zt,title:"Number",type:"number"},{component:Pt,title:"Action Result",type:"action-result"},{component:oe,title:"Decision",type:"decision"},{component:re,title:"Condition",type:"condition"},{component:class extends vt{constructor(t){super(),gt(this,t,ue,ae,c,{def:0},ce)}},title:"AND/OR",type:"and-or"}]}]};function pe(t){v(t,"svelte-1czul97",".expression-selector.svelte-1czul97.svelte-1czul97{position:absolute;top:calc(100% + 10px);left:calc(50%);transform:translateX(-50%);background-color:#fafafa;border:.5px solid black;min-width:400px;z-index:15;border-radius:4px;cursor:default;color:black;text-align:initial;padding:15px;box-shadow:0px 3px 10px -10px}.category.svelte-1czul97.svelte-1czul97{margin-bottom:20px}.category-header.svelte-1czul97.svelte-1czul97{padding:5px;font-size:20px}.category-values.svelte-1czul97.svelte-1czul97{display:flex;flex-direction:row;flex-wrap:wrap}.category-values.svelte-1czul97>div.svelte-1czul97{margin-right:10px;margin-top:10px;background-color:lightgrey;border:1.2px solid lightgrey;padding:3px 10px;border-radius:4px;cursor:pointer;box-sizing:content-box}.category-values.svelte-1czul97>div.svelte-1czul97:hover{border:1.2px solid gray}")}function fe(t,e,n){const o=t.slice();return o[8]=e[n],o}function ge(t,e,n){const o=t.slice();return o[11]=e[n],o}function ve(t){let e,n=de.categories,o=[];for(let e=0;e<n.length;e+=1)o[e]=me(fe(t,n,e));return{c(){e=b("div");for(let t=0;t<o.length;t+=1)o[t].c();E(e,"class","expression-selector svelte-1czul97")},m(t,n){x(t,e,n);for(let t=0;t<o.length;t+=1)o[t].m(e,null)},p(t,l){if(2&l){let i;for(n=de.categories,i=0;i<n.length;i+=1){const s=fe(t,n,i);o[i]?o[i].p(s,l):(o[i]=me(s),o[i].c(),o[i].m(e,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(t){t&&$(e),k(o,t)}}}function he(t){let e,n,o,l,i,s=t[11].title+"";function r(){return t[6](t[11])}return{c(){e=b("div"),n=y(s),o=_(),E(e,"class","svelte-1czul97")},m(t,s){x(t,e,s),g(e,n),g(e,o),l||(i=S(e,"click",r),l=!0)},p(e,n){t=e},d(t){t&&$(e),l=!1,i()}}}function me(t){let e,n,o,l,i,s,r=t[8].title+"",c=t[8].expressions,a=[];for(let e=0;e<c.length;e+=1)a[e]=he(ge(t,c,e));return{c(){e=b("div"),n=b("div"),o=y(r),l=_(),i=b("div");for(let t=0;t<a.length;t+=1)a[t].c();s=_(),E(n,"class","category-header svelte-1czul97"),E(i,"class","category-values svelte-1czul97"),E(e,"class","category svelte-1czul97")},m(t,r){x(t,e,r),g(e,n),g(n,o),g(e,l),g(e,i);for(let t=0;t<a.length;t+=1)a[t].m(i,null);g(e,s)},p(t,e){if(2&e){let n;for(c=t[8].expressions,n=0;n<c.length;n+=1){const o=ge(t,c,n);a[n]?a[n].p(o,e):(a[n]=he(o),a[n].c(),a[n].m(i,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=c.length}},d(t){t&&$(e),k(a,t)}}}function xe(t){let e,o,l,i=t[0]&&ve(t);return{c(){i&&i.c(),e=C()},m(n,s){i&&i.m(n,s),x(n,e,s),o||(l=S(window,"click",t[2]),o=!0)},p(t,[n]){t[0]?i?i.p(t,n):(i=ve(t),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null)},i:n,o:n,d(t){i&&i.d(t),t&&$(e),o=!1,l()}}}let $e=()=>null;function ke(t,e,n){let{rootEl:o}=e;const l=B();function i(t){l("selection",t),r()}let s=!1;const r=()=>{s&&n(0,s=!1)};return t.$$set=t=>{"rootEl"in t&&n(3,o=t.rootEl)},[s,i,function({target:t}){s&&!o.contains(t)&&r()},o,()=>{s||($e(),$e=r,n(0,s=!0))},r,t=>i(t)]}var be=class extends vt{constructor(t){super(),gt(this,t,ke,xe,c,{rootEl:3,open:4,close:5},pe)}get open(){return this.$$.ctx[4]}get close(){return this.$$.ctx[5]}};function we(t){v(t,"svelte-1h74l6v",".empty-expression.svelte-1h74l6v.svelte-1h74l6v{background-color:white;display:block;min-width:70px;min-height:24px;border:1px solid black;border-radius:3px}.expression-root.svelte-1h74l6v.svelte-1h74l6v{position:relative}.remove-btn.svelte-1h74l6v.svelte-1h74l6v{position:absolute;top:0;transform:translate(-50%, -100%);left:50%;display:none}.hovering.svelte-1h74l6v>.remove-btn.svelte-1h74l6v{display:block}")}function ye(t){let e,o,l;return{c(){e=b("div"),E(e,"class","empty-expression svelte-1h74l6v")},m(n,i){x(n,e,i),o||(l=S(e,"click",(function(){r(t[3])&&t[3].apply(this,arguments)})),o=!0)},p(e,n){t=e},i:n,o:n,d(t){t&&$(e),o=!1,l()}}}function _e(t){let e,n,o;var l=t[1].component;function i(t){return{props:{def:t[0]}}}return l&&(e=new l(i(t))),{c(){e&&dt(e.$$.fragment),n=C()},m(t,l){e&&pt(e,t,l),x(t,n,l),o=!0},p(t,o){const s={};if(1&o&&(s.def=t[0]),l!==(l=t[1].component)){if(e){lt();const t=e;rt(t.$$.fragment,1,0,(()=>{ft(t,1)})),it()}l?(e=new l(i(t)),dt(e.$$.fragment),st(e.$$.fragment,1),pt(e,n.parentNode,n)):e=null}else l&&e.$set(s)},i(t){o||(e&&st(e.$$.fragment,t),o=!0)},o(t){e&&rt(e.$$.fragment,t),o=!1},d(t){t&&$(n),e&&ft(e,t)}}}function Ce(t){let e,o,l,i;return{c(){e=b("div"),o=b("button"),o.textContent="Remove",E(o,"type","button"),E(e,"class","remove-btn svelte-1h74l6v")},m(n,s){x(n,e,s),g(e,o),l||(i=S(o,"click",t[5]),l=!0)},p:n,d(t){t&&$(e),l=!1,i()}}}function Se(t){let e,n,o,l,i,s,r,c,a;const u=[_e,ye],d=[];function p(t,e){return t[1]?0:1}function f(e){t[6](e)}n=p(t),o=d[n]=u[n](t);let v={rootEl:t[2]};void 0!==t[3]&&(v.open=t[3]),i=new be({props:v}),H.push((()=>ut(i,"open",f))),i.$on("selection",t[4]);let h=t[1]&&Ce(t);return{c(){e=b("div"),o.c(),l=_(),dt(i.$$.fragment),r=_(),h&&h.c(),E(e,"class",c="expression-root hover-target  svelte-1h74l6v")},m(o,s){x(o,e,s),d[n].m(e,null),g(e,l),pt(i,e,null),g(e,r),h&&h.m(e,null),t[7](e),a=!0},p(t,[r]){let c=n;n=p(t),n===c?d[n].p(t,r):(lt(),rt(d[c],1,1,(()=>{d[c]=null})),it(),o=d[n],o?o.p(t,r):(o=d[n]=u[n](t),o.c()),st(o,1),o.m(e,l));const a={};4&r&&(a.rootEl=t[2]),!s&&8&r&&(s=!0,a.open=t[3],X((()=>s=!1))),i.$set(a),t[1]?h?h.p(t,r):(h=Ce(t),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},i(t){a||(st(o),st(i.$$.fragment,t),a=!0)},o(t){rt(o),rt(i.$$.fragment,t),a=!1},d(o){o&&$(e),d[n].d(),ft(i),h&&h.d(),t[7](null)}}}function Ee(t,e,n){let o,l,i,{def:s}=e;return t.$$set=t=>{"def"in t&&n(0,s=t.def)},t.$$.update=()=>{3&t.$$.dirty&&s?.type!==o?.type&&n(1,o=de.categories[0].expressions.find((t=>t.type===s.type)))},[s,o,l,i,function(t){n(1,o=t.detail),n(0,s.type=t.detail.type,s)},function(){n(0,s.type=void 0,s),n(0,s.inputs={},s)},function(t){i=t,n(3,i)},function(t){H[t?"unshift":"push"]((()=>{l=t,n(2,l)}))}]}var Ne=class extends vt{constructor(t){super(),gt(this,t,Ee,Se,c,{def:0},we)}};function Te(t){v(t,"svelte-1lo1iva",".action-editor.svelte-1lo1iva.svelte-1lo1iva{position:absolute;left:60px;transform:translateY(-50%);background-color:#fafafa;border:.5px solid black;min-width:300px;max-width:500px;width:max-content;z-index:15;border-radius:4px;cursor:default;color:black;text-align:initial;padding:15px;box-shadow:0px 3px 10px -10px}.actions.svelte-1lo1iva.svelte-1lo1iva{position:absolute;top:5px;right:5px}.section-header.svelte-1lo1iva.svelte-1lo1iva{font-size:20px;font-weight:700}.inputs-area.svelte-1lo1iva.svelte-1lo1iva{display:table}.input.svelte-1lo1iva.svelte-1lo1iva{display:table-row}.input.svelte-1lo1iva>div.svelte-1lo1iva{display:table-cell;vertical-align:top;padding-top:5px;padding-bottom:5px}.input-label.svelte-1lo1iva.svelte-1lo1iva{padding-right:10px;font-weight:700}select.svelte-1lo1iva.svelte-1lo1iva{padding:3px 7px;border-radius:2px}")}function ze(t,e,n){const o=t.slice();return o[19]=e[n].inputName,o[20]=e[n].inputDef,o}function Ae(t,e,n){const o=t.slice();return o[23]=e[n],o}function De(t,e,n){const o=t.slice();return o[26]=e[n],o}function Le(t){let e,n;return e=new Rt({props:{target:"#action-editor-portal",$$slots:{default:[Ve]},$$scope:{ctx:t}}}),{c(){dt(e.$$.fragment)},m(t,o){pt(e,t,o),n=!0},p(t,n){const o={};536871031&n&&(o.$$scope={dirty:n,ctx:t}),e.$set(o)},i(t){n||(st(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ft(e,t)}}}function Me(t){let e,n,o,l,i,s,r,c,a,u=t[1]&&Ie(t);return{c(){e=b("div"),n=b("label"),o=b("div"),o.textContent="Action",l=_(),i=b("select"),s=b("option"),r=y("Select"),u&&u.c(),E(o,"class","section-header svelte-1lo1iva"),s.__value=void 0,s.value=s.__value,s.disabled=!0,E(i,"class","svelte-1lo1iva"),void 0===t[0].type&&Q((()=>t[14].call(i)))},m(d,p){x(d,e,p),g(e,n),g(n,o),g(n,l),g(n,i),g(i,s),g(s,r),u&&u.m(i,null),D(i,t[0].type),c||(a=S(i,"change",t[14]),c=!0)},p(t,e){t[1]?u?u.p(t,e):(u=Ie(t),u.c(),u.m(i,null)):u&&(u.d(1),u=null),3&e&&D(i,t[0].type)},d(t){t&&$(e),u&&u.d(),c=!1,a()}}}function Ie(t){let e,n=t[1].actionDefs,o=[];for(let e=0;e<n.length;e+=1)o[e]=Oe(De(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=C()},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);x(t,e,n)},p(t,l){if(2&l){let i;for(n=t[1].actionDefs,i=0;i<n.length;i+=1){const s=De(t,n,i);o[i]?o[i].p(s,l):(o[i]=Oe(s),o[i].c(),o[i].m(e.parentNode,e))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(t){k(o,t),t&&$(e)}}}function Oe(t){let e,n,o,l=t[26].title+"";return{c(){e=b("option"),n=y(l),e.__value=o=t[26].type,e.value=e.__value},m(t,o){x(t,e,o),g(e,n)},p(t,i){2&i&&l!==(l=t[26].title+"")&&T(n,l),2&i&&o!==(o=t[26].type)&&(e.__value=o,e.value=e.__value)},d(t){t&&$(e)}}}function We(t){let e,n,o,l,i,s,r,c,a,u=t[1]&&Re(t);return{c(){e=b("div"),n=b("label"),o=b("div"),o.textContent="Trigger",l=_(),i=b("select"),s=b("option"),r=y("Select"),u&&u.c(),E(o,"class","section-header svelte-1lo1iva"),s.__value=void 0,s.value=s.__value,s.disabled=!0,E(i,"class","svelte-1lo1iva"),void 0===t[0].type&&Q((()=>t[15].call(i)))},m(d,p){x(d,e,p),g(e,n),g(n,o),g(n,l),g(n,i),g(i,s),g(s,r),u&&u.m(i,null),D(i,t[0].type),c||(a=S(i,"change",t[15]),c=!0)},p(t,e){t[1]?u?u.p(t,e):(u=Re(t),u.c(),u.m(i,null)):u&&(u.d(1),u=null),3&e&&D(i,t[0].type)},d(t){t&&$(e),u&&u.d(),c=!1,a()}}}function Re(t){let e,n=t[1].eventDefs,o=[];for(let e=0;e<n.length;e+=1)o[e]=Be(Ae(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=C()},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);x(t,e,n)},p(t,l){if(2&l){let i;for(n=t[1].eventDefs,i=0;i<n.length;i+=1){const s=Ae(t,n,i);o[i]?o[i].p(s,l):(o[i]=Be(s),o[i].c(),o[i].m(e.parentNode,e))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(t){k(o,t),t&&$(e)}}}function Be(t){let e,n,o,l=t[23].title+"";return{c(){e=b("option"),n=y(l),e.__value=o=t[23].type,e.value=e.__value},m(t,o){x(t,e,o),g(e,n)},p(t,i){2&i&&l!==(l=t[23].title+"")&&T(n,l),2&i&&o!==(o=t[23].type)&&(e.__value=o,e.value=e.__value)},d(t){t&&$(e)}}}function je(t){let e,n,o,l,i,s,r,c=t[2]&&qe(t);return{c(){e=b("hr"),n=_(),o=b("div"),l=b("div"),l.textContent="Inputs",i=_(),s=b("div"),c&&c.c(),E(l,"class","section-header svelte-1lo1iva"),E(s,"class","inputs-area svelte-1lo1iva"),E(o,"class","inputs-section")},m(t,a){x(t,e,a),x(t,n,a),x(t,o,a),g(o,l),g(o,i),g(o,s),c&&c.m(s,null),r=!0},p(t,e){t[2]?c?(c.p(t,e),4&e&&st(c,1)):(c=qe(t),c.c(),st(c,1),c.m(s,null)):c&&(lt(),rt(c,1,1,(()=>{c=null})),it())},i(t){r||(st(c),r=!0)},o(t){rt(c),r=!1},d(t){t&&$(e),t&&$(n),t&&$(o),c&&c.d()}}}function qe(t){let e,n,o=t[6],l=[];for(let e=0;e<o.length;e+=1)l[e]=Fe(ze(t,o,e));const i=t=>rt(l[t],1,1,(()=>{l[t]=null}));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=C()},m(t,o){for(let e=0;e<l.length;e+=1)l[e].m(t,o);x(t,e,o),n=!0},p(t,n){if(65&n){let s;for(o=t[6],s=0;s<o.length;s+=1){const i=ze(t,o,s);l[s]?(l[s].p(i,n),st(l[s],1)):(l[s]=Fe(i),l[s].c(),st(l[s],1),l[s].m(e.parentNode,e))}for(lt(),s=o.length;s<l.length;s+=1)i(s);it()}},i(t){if(!n){for(let t=0;t<o.length;t+=1)st(l[t]);n=!0}},o(t){l=l.filter(Boolean);for(let t=0;t<l.length;t+=1)rt(l[t]);n=!1},d(t){k(l,t),t&&$(e)}}}function Fe(t){let e,n,o,l,i,s,r,c,a,u=(t[20].title||t[19])+"";return r=new Ne({props:{def:t[0].inputs[t[19]]}}),{c(){e=b("div"),n=b("div"),o=y(u),l=_(),i=b("div"),s=b("div"),dt(r.$$.fragment),c=_(),E(n,"class","input-label svelte-1lo1iva"),E(s,"class","input-value"),E(i,"class","svelte-1lo1iva"),E(e,"class","input svelte-1lo1iva")},m(t,u){x(t,e,u),g(e,n),g(n,o),g(e,l),g(e,i),g(i,s),pt(r,s,null),g(e,c),a=!0},p(t,e){(!a||64&e)&&u!==(u=(t[20].title||t[19])+"")&&T(o,u);const n={};65&e&&(n.def=t[0].inputs[t[19]]),r.$set(n)},i(t){a||(st(r.$$.fragment,t),a=!0)},o(t){rt(r.$$.fragment,t),a=!1},d(t){t&&$(e),ft(r)}}}function Ve(t){let e,n,o,l,i,s,r,c,a,u,d,p="action"===t[0].kind&&Me(t),f="trigger"===t[0].kind&&We(t),v=t[0].type&&"action"===t[0].kind&&je(t);return{c(){e=b("div"),n=b("div"),o=b("button"),o.textContent="Remove",l=_(),i=b("button"),i.textContent="Close",s=_(),p&&p.c(),r=_(),f&&f.c(),c=_(),v&&v.c(),E(o,"type","button"),E(i,"type","button"),E(n,"class","actions svelte-1lo1iva"),E(e,"class","action-editor svelte-1lo1iva")},m(h,m){x(h,e,m),g(e,n),g(n,o),g(n,l),g(n,i),t[13](i),g(e,s),p&&p.m(e,null),g(e,r),f&&f.m(e,null),g(e,c),v&&v.m(e,null),t[16](e),a=!0,u||(d=S(o,"click",t[8]),u=!0)},p(t,n){"action"===t[0].kind?p?p.p(t,n):(p=Me(t),p.c(),p.m(e,r)):p&&(p.d(1),p=null),"trigger"===t[0].kind?f?f.p(t,n):(f=We(t),f.c(),f.m(e,c)):f&&(f.d(1),f=null),t[0].type&&"action"===t[0].kind?v?(v.p(t,n),1&n&&st(v,1)):(v=je(t),v.c(),st(v,1),v.m(e,null)):v&&(lt(),rt(v,1,1,(()=>{v=null})),it())},i(t){a||(st(v),a=!0)},o(t){rt(v),a=!1},d(n){n&&$(e),t[13](null),p&&p.d(),f&&f.d(),v&&v.d(),t[16](null),u=!1,d()}}}function He(t){let e,n,o,l,i=t[3]&&Le(t);return{c(){i&&i.c(),e=C()},m(s,r){i&&i.m(s,r),x(s,e,r),n=!0,o||(l=S(window,"click",t[7]),o=!0)},p(t,[n]){t[3]?i?(i.p(t,n),8&n&&st(i,1)):(i=Le(t),i.c(),st(i,1),i.m(e.parentNode,e)):i&&(lt(),rt(i,1,1,(()=>{i=null})),it())},i(t){n||(st(i),n=!0)},o(t){rt(i),n=!1},d(t){i&&i.d(t),t&&$(e),o=!1,l()}}}let Pe=()=>null;function Je(t,e,n){let o,l,{def:i}=e,{rootEl:s}=e;const r=B();let c,a;R((async()=>{n(0,i.inputs=i.inputs||{},i),n(1,c=await bt.getMetadata())}));let u,d=!1;const p=()=>{d&&n(3,d=!1)};let f;return t.$$set=t=>{"def"in t&&n(0,i=t.def),"rootEl"in t&&n(9,s=t.rootEl)},t.$$.update=()=>{1&t.$$.dirty&&i?.type&&r("change-type",i.type),3&t.$$.dirty&&(n(2,a=c?.actionDefs.find((t=>t.type===i.type))),function(){if(!a?.inputSchema.properties)return;const t={};for(let e in a?.inputSchema.properties||[])t[e]=i.inputs[e]||{kind:"expression"};n(0,i.inputs=t,i)}()),4&t.$$.dirty&&n(12,o=Object.keys(a?.inputSchema.properties||{})),4100&t.$$.dirty&&n(6,l=o.map((t=>({inputName:t,inputDef:a.inputSchema.properties[t]}))))},[i,c,a,d,u,f,l,function(t){(d&&t.target.isConnected&&!s.contains(t.target)&&!u.contains(t.target)||t.target===f)&&p()},function(){r("remove"),p()},s,()=>{d||(Pe(),Pe=p,n(3,d=!0))},p,o,function(t){H[t?"unshift":"push"]((()=>{f=t,n(5,f)}))},function(){i.type=L(this),n(0,i),n(1,c)},function(){i.type=L(this),n(0,i),n(1,c)},function(t){H[t?"unshift":"push"]((()=>{u=t,n(4,u)}))}]}var Ge=class extends vt{constructor(t){super(),gt(this,t,Je,He,c,{def:0,rootEl:9,open:10,close:11},Te)}get open(){return this.$$.ctx[10]}get close(){return this.$$.ctx[11]}};const Ue=["#EF5350","#EC407A","#AB47BC","#7E57C2","#5C6BC0","#42A5F5","#29B6F6","#26C6DA","#26A69A","#66BB6A","#9CCC65","#D4E157","#FFEE58","#FFCA28","#FFA726","#FF7043","#8D6E63","#78909C"];function Ke(t){if(!t||"?"===t)return"#9E9E9E";let e=function(t){var e,n=0;if(0===t.length)return n;for(e=0;e<t.length;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return n}(t),n=Math.abs(e%Ue.length);return Ue[n]}function Qe(t){v(t,"svelte-co8fod",".node.svelte-co8fod{background-color:black;padding:50px;border-radius:1000px;color:white;margin:15px;position:relative;cursor:pointer;box-shadow:black 0px 1px 6px -3px;filter:brightness(1.1)\r\n  }.node-name.svelte-co8fod{background-color:#f9f9f9;padding:0 7px;position:absolute;color:black;font-size:14px;left:50%;top:50%;transform:translate(-50%, -50%);border-radius:5px;white-space:nowrap;box-shadow:black 0px 1px 7px -4px}.svg-path.svelte-co8fod{position:absolute;left:30px;top:30px;z-index:-10;width:10px;overflow:visible}.hovering.svelte-co8fod{border:3px solid lightblue;padding:47px}")}function Xe(t){let e,n,o,l,i,s,c,a,u,d;function p(e){t[6](e)}let f={def:t[0],rootEl:t[1]};return void 0!==t[2]&&(f.open=t[2]),i=new Ge({props:f}),H.push((()=>ut(i,"open",p))),i.$on("change-type",t[7]),i.$on("remove",t[8]),{c(){e=b("div"),n=b("div"),o=y(t[3]),l=_(),dt(i.$$.fragment),E(n,"class","node-name svelte-co8fod"),E(e,"class",c="node hover-target  svelte-co8fod"),A(e,"background-color",Ke(t[3]))},m(s,c){x(s,e,c),g(e,n),g(n,o),g(e,l),pt(i,e,null),t[9](e),a=!0,u||(d=S(e,"click",(function(){r(t[2])&&t[2].apply(this,arguments)})),u=!0)},p(n,[l]){t=n,(!a||8&l)&&T(o,t[3]);const r={};1&l&&(r.def=t[0]),2&l&&(r.rootEl=t[1]),!s&&4&l&&(s=!0,r.open=t[2],X((()=>s=!1))),i.$set(r),(!a||8&l)&&A(e,"background-color",Ke(t[3]))},i(t){a||(st(i.$$.fragment,t),a=!0)},o(t){rt(i.$$.fragment,t),a=!1},d(n){n&&$(e),ft(i),t[9](null),u=!1,d()}}}function Ye(t,e,n){let o,l,i,s,{def:r}=e,{kind:c}=e;function a(t){let e=s?.find((e=>e.type===t));n(3,i=e?.title||"?")}j("parents",[...q("parents")||[],r]),bt.getMetadata().then((t=>{s="trigger"===c?t.eventDefs:t.actionDefs,a(r?.type)}));return t.$$set=t=>{"def"in t&&n(0,r=t.def),"kind"in t&&n(5,c=t.kind)},[r,o,l,i,a,c,function(t){l=t,n(2,l)},t=>a(t.detail),function(e){F.call(this,t,e)},function(t){H[t?"unshift":"push"]((()=>{o=t,n(1,o)}))}]}var Ze=class extends vt{constructor(t){super(),gt(this,t,Ye,Xe,c,{def:0,kind:5},Qe)}};function tn(t){v(t,"svelte-14tfekm",".add-step-container.svelte-14tfekm.svelte-14tfekm{position:relative;width:10px}.add-step.svelte-14tfekm.svelte-14tfekm{position:absolute;width:100px;height:30px;top:-15px;left:-45px;z-index:5\r\n  }.add-step-btns.svelte-14tfekm button.svelte-14tfekm{background-color:black;border:none;color:white;border-radius:100px;cursor:pointer;width:25px;height:25px}.add-step.svelte-14tfekm:hover .placeholder.svelte-14tfekm{display:none}.add-step.svelte-14tfekm:not(:hover) .add-step-btns.svelte-14tfekm{display:none}.placeholder.svelte-14tfekm.svelte-14tfekm{position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);color:white;font-weight:700;background-color:black;padding:2px;width:20px;height:20px;border-radius:100px}.placeholder-text.svelte-14tfekm.svelte-14tfekm{line-height:9px;text-align:center}")}function en(t){let e,o,l;return{c(){e=b("button"),e.textContent="ᛣ",E(e,"type","button"),E(e,"class","svelte-14tfekm")},m(n,i){x(n,e,i),o||(l=S(e,"click",t[5]),o=!0)},p:n,d(t){t&&$(e),o=!1,l()}}}function nn(t){let e,o,l;return{c(){e=b("button"),e.textContent="＋",E(e,"type","button"),E(e,"class","svelte-14tfekm")},m(n,i){x(n,e,i),o||(l=S(e,"click",t[4]),o=!0)},p:n,d(t){t&&$(e),o=!1,l()}}}function on(t){let e,o,l,i,r;return{c(){e=b("button"),e.textContent="⬤",o=_(),l=b("button"),l.textContent="⅄",E(e,"type","button"),E(e,"class","svelte-14tfekm"),E(l,"type","button"),E(l,"class","svelte-14tfekm")},m(n,s){x(n,e,s),x(n,o,s),x(n,l,s),i||(r=[S(e,"click",t[2]),S(l,"click",t[3])],i=!0)},p:n,d(t){t&&$(e),t&&$(o),t&&$(l),i=!1,s(r)}}}function ln(t){let e,o,l,i,s;function r(t,e){return"path"===t[0]?on:"trigger"===t[0]?nn:en}let c=r(t),a=c(t);return{c(){e=b("div"),o=b("div"),l=b("div"),l.innerHTML='<div class="placeholder-text svelte-14tfekm">...</div>',i=_(),s=b("div"),a.c(),E(l,"class","placeholder svelte-14tfekm"),E(s,"class","add-step-btns svelte-14tfekm"),E(o,"class","add-step svelte-14tfekm"),E(e,"class","add-step-container svelte-14tfekm")},m(t,n){x(t,e,n),g(e,o),g(o,l),g(o,i),g(o,s),a.m(s,null)},p(t,[e]){c===(c=r(t))&&a?a.p(t,e):(a.d(1),a=c(t),a&&(a.c(),a.m(s,null)))},i:n,o:n,d(t){t&&$(e),a.d()}}}function sn(t,e,n){let{kind:o}=e;const l=B();return t.$$set=t=>{"kind"in t&&n(0,o=t.kind)},[o,l,()=>l("select",{kind:"action"}),()=>l("select",{kind:"fork"}),()=>l("select"),()=>l("select")]}var rn=class extends vt{constructor(t){super(),gt(this,t,sn,ln,c,{kind:0},tn)}};function cn(t){v(t,"svelte-1ca9v",".fork.svelte-1ca9v.svelte-1ca9v{display:flex;flex-direction:row;padding:25px 5px;border:.5px solid black;border-radius:10px;margin:5px;position:relative;background-color:#fafafa;z-index:1}.svg-path.svelte-1ca9v.svelte-1ca9v{position:absolute;left:0;top:0;z-index:1;width:10px;height:10px;overflow:visible}.hovering.svelte-1ca9v.svelte-1ca9v{border:3px solid lightblue;padding:22.5px 2.5px}.add-step.svelte-1ca9v.svelte-1ca9v{position:absolute;top:15px;left:calc(50% - 5px);display:none}.hovering.svelte-1ca9v>.add-step.svelte-1ca9v{display:block}")}function an(t,e,n){const o=t.slice();return o[6]=e[n],o[8]=n,o}function un(t,e,n){const o=t.slice();return o[9]=e[n],o}function dn(t){let e,n;return e=new Cn({props:{def:t[9]}}),{c(){dt(e.$$.fragment)},m(t,o){pt(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.def=t[9]),e.$set(o)},i(t){n||(st(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ft(e,t)}}}function pn(t){let e,n=t[0].paths,o=[];for(let e=0;e<n.length;e+=1)o[e]=fn(an(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=C()},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);x(t,e,n)},p(t,l){if(3&l){let i;for(n=t[0].paths,i=0;i<n.length;i+=1){const s=an(t,n,i);o[i]?o[i].p(s,l):(o[i]=fn(s),o[i].c(),o[i].m(e.parentNode,e))}for(;i<o.length;i+=1)o[i].d(1);o.length=n.length}},d(t){k(o,t),t&&$(e)}}}function fn(t){let e,n;return{c(){e=w("path"),E(e,"fill","none"),E(e,"stroke","black"),E(e,"d",n=vn(t[8],t[1]))},m(t,n){x(t,e,n)},p(t,o){2&o&&n!==(n=vn(t[8],t[1]))&&E(e,"d",n)},d(t){t&&$(e)}}}function gn(t){let e,n,o,l,i,s,r,c;o=new rn({props:{kind:"branch"}}),o.$on("select",t[2]);let a=t[0].paths,u=[];for(let e=0;e<a.length;e+=1)u[e]=dn(un(t,a,e));const d=t=>rt(u[t],1,1,(()=>{u[t]=null}));let p=t[1]&&pn(t);return{c(){e=b("div"),n=b("div"),dt(o.$$.fragment),l=_();for(let t=0;t<u.length;t+=1)u[t].c();i=_(),s=w("svg"),p&&p.c(),E(n,"class","add-step svelte-1ca9v"),E(s,"class","svg-path svelte-1ca9v"),E(s,"viewBox","0 0 10 10"),E(s,"xmlns","http://www.w3.org/2000/svg"),E(s,"stroke-width","2.5"),E(s,"stroke-linecap","round"),E(e,"class",r="fork hover-target  svelte-1ca9v")},m(r,a){x(r,e,a),g(e,n),pt(o,n,null),g(e,l);for(let t=0;t<u.length;t+=1)u[t].m(e,null);g(e,i),g(e,s),p&&p.m(s,null),t[4](e),c=!0},p(t,[n]){if(1&n){let o;for(a=t[0].paths,o=0;o<a.length;o+=1){const l=un(t,a,o);u[o]?(u[o].p(l,n),st(u[o],1)):(u[o]=dn(l),u[o].c(),st(u[o],1),u[o].m(e,i))}for(lt(),o=a.length;o<u.length;o+=1)d(o);it()}t[1]?p?p.p(t,n):(p=pn(t),p.c(),p.m(s,null)):p&&(p.d(1),p=null)},i(t){if(!c){st(o.$$.fragment,t);for(let t=0;t<a.length;t+=1)st(u[t]);c=!0}},o(t){rt(o.$$.fragment,t),u=u.filter(Boolean);for(let t=0;t<u.length;t+=1)rt(u[t]);c=!1},d(n){n&&$(e),ft(o),k(u,n),p&&p.d(),t[4](null)}}}function vn(t,e){let n=e.children[t+1];if(!n)return 0;const o=e.offsetWidth/2,l=n.offsetHeight+30;return`\n      M ${o} -1 L ${n.offsetLeft+n.offsetWidth/2} 31\n      M ${o} ${e.offsetHeight+1} L ${n.offsetLeft+n.offsetWidth/2} ${l}\n    `}function hn(t,e,n){let o,{def:l}=e;j("parents",[...q("parents")||[],l]);let i=!1;return t.$$set=t=>{"def"in t&&n(0,l=t.def)},t.$$.update=()=>{11&t.$$.dirty&&o&&!i&&(n(3,i=!0),new ResizeObserver((()=>(n(0,l),n(1,o),n(3,i)))).observe(o))},[l,o,function(){l.paths.push({kind:"path",steps:[{kind:"action"}]}),n(0,l),n(1,o),n(3,i)},i,function(t){H[t?"unshift":"push"]((()=>{o=t,n(1,o)}))}]}var mn=class extends vt{constructor(t){super(),gt(this,t,hn,gn,c,{def:0},cn)}};function xn(t){v(t,"svelte-1k8u9kl",".path.svelte-1k8u9kl.svelte-1k8u9kl{display:flex;flex-direction:column;align-items:center;text-align:center;padding:20px 5px;padding-top:20px;border:.5px solid black;border-radius:10px;margin:5px;position:relative;background-color:#fafafa;z-index:1;min-width:50px}.svg-path.svelte-1k8u9kl.svelte-1k8u9kl{position:absolute;left:50%;top:0;z-index:-10;width:10px;overflow:visible}.add-node-btn.svelte-1k8u9kl.svelte-1k8u9kl{background-color:white;border:2px solid black;border-radius:1000px;color:black;margin:15px;font-weight:400;width:60px;height:60px;font-size:60px;position:relative;cursor:pointer}.hovering.svelte-1k8u9kl.svelte-1k8u9kl{border:3px solid lightblue;padding:17.5px 2.5px}.add-step.svelte-1k8u9kl.svelte-1k8u9kl{display:none}.hovering.svelte-1k8u9kl>.add-step.svelte-1k8u9kl{display:block}")}function $n(t,e,n){const o=t.slice();return o[11]=e[n],o[13]=n,o}function kn(t){let e,n;return e=new mn({props:{def:t[11]}}),{c(){dt(e.$$.fragment)},m(t,o){pt(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.def=t[11]),e.$set(o)},i(t){n||(st(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ft(e,t)}}}function bn(t){let e,n;return e=new Ze({props:{def:t[11]}}),e.$on("remove",(function(){return t[6](t[13])})),{c(){dt(e.$$.fragment)},m(t,o){pt(e,t,o),n=!0},p(n,o){t=n;const l={};1&o&&(l.def=t[11]),e.$set(l)},i(t){n||(st(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ft(e,t)}}}function wn(t){let e,n,o,l,i,s;const r=[bn,kn],c=[];function a(t,e){return"action"===t[11].kind?0:"fork"===t[11].kind?1:-1}return~(e=a(t))&&(n=c[e]=r[e](t)),i=new rn({props:{kind:"path"}}),i.$on("select",(function(...e){return t[7](t[13],...e)})),{c(){n&&n.c(),o=_(),l=b("div"),dt(i.$$.fragment),E(l,"class","add-step svelte-1k8u9kl")},m(t,n){~e&&c[e].m(t,n),x(t,o,n),x(t,l,n),pt(i,l,null),s=!0},p(l,i){let s=e;e=a(t=l),e===s?~e&&c[e].p(t,i):(n&&(lt(),rt(c[s],1,1,(()=>{c[s]=null})),it()),~e?(n=c[e],n?n.p(t,i):(n=c[e]=r[e](t),n.c()),st(n,1),n.m(o.parentNode,o)):n=null)},i(t){s||(st(n),st(i.$$.fragment,t),s=!0)},o(t){rt(n),rt(i.$$.fragment,t),s=!1},d(t){~e&&c[e].d(t),t&&$(o),t&&$(l),ft(i)}}}function yn(t){let e,n,o,l,i,s,r,c,a;o=new rn({props:{kind:"path"}}),o.$on("select",t[5]);let u=t[0].steps,d=[];for(let e=0;e<u.length;e+=1)d[e]=wn($n(t,u,e));const p=t=>rt(d[t],1,1,(()=>{d[t]=null}));return{c(){e=b("div"),n=b("div"),dt(o.$$.fragment),l=_();for(let t=0;t<d.length;t+=1)d[t].c();i=_(),s=w("svg"),r=w("path"),E(n,"class","add-step svelte-1k8u9kl"),E(r,"fill","none"),E(r,"stroke","black"),E(r,"d",t[2]),E(s,"class","svg-path svelte-1k8u9kl"),E(s,"viewBox","0 0 10 10"),E(s,"xmlns","http://www.w3.org/2000/svg"),E(s,"stroke-width","2.5"),E(s,"stroke-linecap","round"),E(e,"class",c="path hover-target  svelte-1k8u9kl")},m(c,u){x(c,e,u),g(e,n),pt(o,n,null),g(e,l);for(let t=0;t<d.length;t+=1)d[t].m(e,null);g(e,i),g(e,s),g(s,r),t[8](e),a=!0},p(t,[n]){if(25&n){let o;for(u=t[0].steps,o=0;o<u.length;o+=1){const l=$n(t,u,o);d[o]?(d[o].p(l,n),st(d[o],1)):(d[o]=wn(l),d[o].c(),st(d[o],1),d[o].m(e,i))}for(lt(),o=u.length;o<d.length;o+=1)p(o);it()}(!a||4&n)&&E(r,"d",t[2])},i(t){if(!a){st(o.$$.fragment,t);for(let t=0;t<u.length;t+=1)st(d[t]);a=!0}},o(t){rt(o.$$.fragment,t),d=d.filter(Boolean);for(let t=0;t<d.length;t+=1)rt(d[t]);a=!1},d(n){n&&$(e),ft(o),k(d,n),t[8](null)}}}function _n(t,e,n){let o,{def:l}=e;function i(t,e){if("action"===t)l.steps.splice(e,0,{kind:"action"});else if("fork"===t){const n={kind:t,paths:[{kind:"path",steps:l.steps.splice(e)},{kind:"path",steps:[{kind:"action"}]}]};l.steps.push(n)}n(0,l)}j("parents",[...q("parents"),l]);let s="",r=new ResizeObserver((()=>n(2,s="M 0 1 v "+(o?.offsetHeight-3))));var c;function a(t){l.steps.splice(t,1),n(0,l)}c=()=>{r.disconnect()},W().$$.on_destroy.push(c);return t.$$set=t=>{"def"in t&&n(0,l=t.def)},t.$$.update=()=>{2&t.$$.dirty&&o&&r.observe(o)},[l,o,s,i,a,t=>i(t.detail.kind,0),t=>a(t),(t,e)=>i(e.detail.kind,t+1),function(t){H[t?"unshift":"push"]((()=>{o=t,n(1,o)}))}]}var Cn=class extends vt{constructor(t){super(),gt(this,t,_n,yn,c,{def:0},xn)}};function Sn(t){v(t,"svelte-gmdnv9",".trigger-set.svelte-gmdnv9{display:flex;flex-direction:row;padding:5px;border:.5px solid black;border-radius:10px;margin:5px;position:relative}.add-trigger.svelte-gmdnv9{position:absolute;right:-45px;top:calc(50% - 5px)}.hovering.svelte-gmdnv9{border:3px solid lightblue;padding:2.5px 2.5px}")}function En(t,e,n){const o=t.slice();return o[2]=e[n],o}function Nn(t){let e,n;return e=new Ze({props:{kind:"trigger",def:t[2]}}),{c(){dt(e.$$.fragment)},m(t,o){pt(e,t,o),n=!0},p(t,n){const o={};1&n&&(o.def=t[2]),e.$set(o)},i(t){n||(st(e.$$.fragment,t),n=!0)},o(t){rt(e.$$.fragment,t),n=!1},d(t){ft(e,t)}}}function Tn(t){let e,n,o,l,i,s,r=t[0],c=[];for(let e=0;e<r.length;e+=1)c[e]=Nn(En(t,r,e));const a=t=>rt(c[t],1,1,(()=>{c[t]=null}));return l=new rn({props:{kind:"trigger"}}),l.$on("select",t[1]),{c(){e=b("div");for(let t=0;t<c.length;t+=1)c[t].c();n=_(),o=b("div"),dt(l.$$.fragment),E(o,"class","add-trigger svelte-gmdnv9"),E(e,"class",i="trigger-set hover-target  svelte-gmdnv9")},m(t,i){x(t,e,i);for(let t=0;t<c.length;t+=1)c[t].m(e,null);g(e,n),g(e,o),pt(l,o,null),s=!0},p(t,[o]){if(1&o){let l;for(r=t[0],l=0;l<r.length;l+=1){const i=En(t,r,l);c[l]?(c[l].p(i,o),st(c[l],1)):(c[l]=Nn(i),c[l].c(),st(c[l],1),c[l].m(e,n))}for(lt(),l=r.length;l<c.length;l+=1)a(l);it()}},i(t){if(!s){for(let t=0;t<r.length;t+=1)st(c[t]);st(l.$$.fragment,t),s=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)rt(c[t]);rt(l.$$.fragment,t),s=!1},d(t){t&&$(e),k(c,t),ft(l)}}}function zn(t,e,n){let{triggers:o}=e;return t.$$set=t=>{"triggers"in t&&n(0,o=t.triggers)},[o,function(t,e){o.push({kind:"trigger"}),n(0,o)}]}var An=class extends vt{constructor(t){super(),gt(this,t,zn,Tn,c,{triggers:0},Sn)}};function Dn(t){v(t,"svelte-1w7nlg6",".workflow-editor.svelte-1w7nlg6{display:flex;align-items:stretch;justify-content:center;width:100%;height:100%\r\n  }.workflow-view-panel.svelte-1w7nlg6{padding-top:35px;min-width:700px;flex-grow:5}.workflow-view-container.svelte-1w7nlg6{max-width:900px;margin-left:auto;margin-right:auto}.title-input.svelte-1w7nlg6{border:none;outline:none;background-color:#fafafa;font-size:36px;width:700px;font-weight:300}.node-flow.svelte-1w7nlg6{display:flex;flex-direction:column;align-items:center;padding-top:10px}.section-headers.svelte-1w7nlg6{font-size:30px;font-weight:300;margin:10px}.btn.svelte-1w7nlg6{font-size:18px;font-weight:300;margin-left:15px;border:1px solid gainsboro;padding:5px 10px 5px 10px;border-radius:2px;vertical-align:middle;box-shadow:0px 2px 10px -8px;background-color:rgb(250, 250, 250)}.btn.svelte-1w7nlg6:hover{cursor:pointer}")}function Ln(t){let e,n,o,l,i,r,c,a,u,d,p,f,v,h,m,k,w,y,C,N,T,D,L;return h=new An({props:{triggers:t[0].triggers}}),y=new Cn({props:{def:t[0].path}}),{c(){e=b("div"),n=b("div"),o=b("div"),l=b("p"),i=b("button"),i.textContent="Close",r=_(),c=b("button"),c.textContent="Save",a=_(),u=b("input"),d=_(),p=b("div"),f=b("div"),f.textContent="Triggers",v=_(),dt(h.$$.fragment),m=_(),k=b("div"),k.textContent="Workflow",w=_(),dt(y.$$.fragment),C=_(),N=b("div"),E(i,"class","close-workflow btn svelte-1w7nlg6"),E(i,"type","button"),E(c,"type","button"),E(c,"class","action-editor-save-btn btn svelte-1w7nlg6"),A(l,"float","right"),E(u,"class","title-input svelte-1w7nlg6"),E(u,"type","text"),E(u,"placeholder","Title"),E(f,"class","section-headers svelte-1w7nlg6"),E(k,"class","section-headers svelte-1w7nlg6"),E(p,"class","node-flow svelte-1w7nlg6"),E(o,"class","workflow-view-container svelte-1w7nlg6"),E(n,"class","workflow-view-panel svelte-1w7nlg6"),E(e,"class","workflow-editor svelte-1w7nlg6"),E(N,"id","action-editor-portal")},m(s,$){x(s,e,$),g(e,n),g(n,o),g(o,l),g(l,i),g(l,r),g(l,c),g(o,a),g(o,u),z(u,t[0].title),g(o,d),g(o,p),g(p,f),g(p,v),pt(h,p,null),g(p,m),g(p,k),g(p,w),pt(y,p,null),x(s,C,$),x(s,N,$),T=!0,D||(L=[S(i,"click",t[2]),S(c,"click",t[1]),S(u,"input",t[4])],D=!0)},p(t,e){1&e&&u.value!==t[0].title&&z(u,t[0].title);const n={};1&e&&(n.triggers=t[0].triggers),h.$set(n);const o={};1&e&&(o.def=t[0].path),y.$set(o)},i(t){T||(st(h.$$.fragment,t),st(y.$$.fragment,t),T=!0)},o(t){rt(h.$$.fragment,t),rt(y.$$.fragment,t),T=!1},d(t){t&&$(e),ft(h),ft(y),t&&$(C),t&&$(N),D=!1,s(L)}}}function Mn(t){let e,n,o,l,i=t[0]&&Ln(t);return{c(){i&&i.c(),e=C()},m(t,s){i&&i.m(t,s),x(t,e,s),n=!0,o||(l=S(window,"mouseover",In),o=!0)},p(t,[n]){t[0]?i?(i.p(t,n),1&n&&st(i,1)):(i=Ln(t),i.c(),st(i,1),i.m(e.parentNode,e)):i&&(lt(),rt(i,1,1,(()=>{i=null})),it())},i(t){n||(st(i),n=!0)},o(t){rt(i),n=!1},d(t){i&&i.d(t),t&&$(e),o=!1,l()}}}function In(t){let e=t.target.closest(".hover-target");if(!e?.matches(".hovering")){for(let t of document.querySelectorAll(".hovering"))t.classList.remove("hovering");e?.classList.add("hovering")}}function On(t,e,n){let o,{workflowId:l}=e;l?bt.getWorkflow(l).then((t=>n(0,o=t))):o={kind:"workflow",triggers:[{kind:"trigger"}],path:{id:0,kind:"path",steps:[{kind:"action"}]}};let i,s=q("history");return t.$$set=t=>{"workflowId"in t&&n(3,l=t.workflowId)},t.$$.update=()=>{1&t.$$.dirty&&j("parents",[o]),1&t.$$.dirty&&(i=JSON.stringify(o||null,null,2))},[o,async function(){let t={...o,lastModifiedAt:(new Date).toLocaleString()};o.id?n(0,o=await bt.updateWorkflow(o.id,t)):(n(0,o=await bt.createWorkflow(t)),s.pushState(`/workflow/?workflow-id=${o.id}`))},function(){s.pushState("/")},l,function(){o.title=this.value,n(0,o)}]}var Wn=class extends vt{constructor(t){super(),gt(this,t,On,Mn,c,{workflowId:3},Dn)}};const{window:Rn}=ct;function Bn(t){let e,n,l,i,s;const r=[t[0]];var c=t[1];function a(t){let e={};for(let t=0;t<r.length;t+=1)e=o(e,r[t]);return{props:e}}return c&&(e=new c(a())),{c(){e&&dt(e.$$.fragment),n=C()},m(o,r){e&&pt(e,o,r),x(o,n,r),l=!0,i||(s=S(Rn,"popstate",t[2]),i=!0)},p(t,[o]){const l=1&o?function(t,e){const n={},o={},l={$$scope:1};let i=t.length;for(;i--;){const s=t[i],r=e[i];if(r){for(const t in s)t in r||(o[t]=1);for(const t in r)l[t]||(n[t]=r[t],l[t]=1);t[i]=r}else for(const t in s)l[t]=1}for(const t in o)t in n||(n[t]=void 0);return n}(r,[(i=t[0],"object"==typeof i&&null!==i?i:{})]):{};var i;if(c!==(c=t[1])){if(e){lt();const t=e;rt(t.$$.fragment,1,0,(()=>{ft(t,1)})),it()}c?(e=new c(a()),dt(e.$$.fragment),st(e.$$.fragment,1),pt(e,n.parentNode,n)):e=null}else c&&e.$set(l)},i(t){l||(e&&st(e.$$.fragment,t),l=!0)},o(t){e&&rt(e.$$.fragment,t),l=!1},d(t){t&&$(n),e&&ft(e,t),i=!1,s()}}}function jn(t,e,n){let o=q("history");o.pushState=function(t){window.history.pushState({},"lowcodeDevKit",t),s()},o.back=window.history.back;let l={},i=null;function s(){n(1,[i,l]=function(t){const e=t.pathname.trim().split("/").filter(Boolean).join("/").toLowerCase(),n=new URLSearchParams(t.search);if("workflow"===e){const t=n.get("workflow-id");return[Wn,{workflowId:t}]}return[Lt,{}]}(window.location),i,n(0,l))}return R((()=>s())),[l,i,s]}var qn=class extends vt{constructor(t){super(),gt(this,t,jn,Bn,c,{})}};function Fn(t){v(t,"svelte-11cir4s",".background.svelte-11cir4s{background-color:#fafafa;position:fixed;left:0;right:0;top:0;bottom:0;font-family:'Roboto', sans-serif;overflow-y:auto}")}function Vn(t){let e,o,l,i,s,r;return o=new $t({}),s=new qn({}),{c(){e=b("div"),dt(o.$$.fragment),l=_(),i=b("div"),dt(s.$$.fragment),E(i,"class","main-body"),E(e,"class","background svelte-11cir4s")},m(t,n){x(t,e,n),pt(o,e,null),g(e,l),g(e,i),pt(s,i,null),r=!0},p:n,i(t){r||(st(o.$$.fragment,t),st(s.$$.fragment,t),r=!0)},o(t){rt(o.$$.fragment,t),rt(s.$$.fragment,t),r=!1},d(t){t&&$(e),ft(o),ft(s)}}}function Hn(t){return j("history",{pushState(){}}),[]}var Pn=class extends vt{constructor(t){super(),gt(this,t,Hn,Vn,c,{},Fn)}};var Jn;function Gn(){return JSON.parse(localStorage.getItem("workflows")||"[]")}function Un(t){localStorage.setItem("workflows",JSON.stringify(t))}Jn=JSON.parse('{"eventDefs":[{"version":"1","title":"Application Created","tags":["business"],"inputSchema":{"properties":{"referenceId":{"type":"string","title":"Reference Id"}}},"kind":"event-type","type":"application-created"}],"actionDefs":[{"version":"1","displayName":"Add Numbers","title":"Add Numbers","descriptions":"","docs":"","inputSchema":{"required":["numA","numB"],"properties":{"numA":{"type":"number","title":"Number 1"},"numB":{"type":"number","title":"Number 2"}}},"kind":"action-type","type":"add-numbers"},{"version":"1","displayName":"Set Lifecycle Stage","title":"Set Lifecycle Stage","inputSchema":{"required":["lifecycleStage","referenceId"],"properties":{"lifecycleStage":{"type":"string","title":"Lifecycle Stage","enum":["Not Started","Quotes Sent","Policy In-Force Service","Merged"]},"referenceId":{"type":"string","title":"Reference Id"}}},"kind":"action-type","type":"set-lifecycle-stage"}]}'),bt.getAllWorkflows=async function(){return JSON.parse(localStorage.getItem("workflows")||"[]")},bt.getMetadata=async function(){return e(Jn)},bt.getWorkflow=async function(t){Gn()[0]},bt.createWorkflow=async function(t){let e=Gn();return e.push(t),Un(e),t},bt.updateWorkflow=async function(t,e){return Un(Gn()),e},bt.deleteWorkflows=async function(t){Un(Gn())},new Pn({target:document.body});
//# sourceMappingURL=index.9c3acc42.js.map
